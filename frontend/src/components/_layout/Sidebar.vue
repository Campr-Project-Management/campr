<template>
    <aside>
        <a href="/" class="logo"></a>
        <nav>
            <ul>
                <li class="active">
                    <router-link :to="{name: 'dashboard'}" title="Dashboard">
                        <span class="default">{{ message.dashboard }}</span>
                        <span class="tablet">
                            <svg version="1.1" class="dashboard-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                               viewBox="0 0 23.6 23.6" xml:space="preserve">
                            <g id="XMLID_826_">
                                <g>
                                    <rect id="XMLID_105_" x="2.8" y="2.4" class="st0" width="18" height="18.8"/>
                                    <line id="XMLID_104_" class="st0" x1="11.8" y1="13.9" x2="11.8" y2="8.2"/>
                                    <line id="XMLID_103_" class="st0" x1="16.7" y1="13.9" x2="16.7" y2="12.3"/>
                                    <line id="XMLID_102_" class="st0" x1="6.9" y1="9" x2="6.9" y2="4.9"/>
                                    <line id="XMLID_101_" class="st0" x1="6.9" y1="13.9" x2="6.9" y2="10.6"/>
                                    <line id="XMLID_100_" class="st0" x1="16.7" y1="10.6" x2="16.7" y2="4.9"/>
                                    <line id="XMLID_99_" class="st0" x1="11.8" y1="6.5" x2="11.8" y2="4.9"/>
                                    <rect id="XMLID_98_" x="15.1" y="10.6" class="st0" width="3.3" height="1.6"/>
                                    <rect id="XMLID_97_" x="10.2" y="6.5" class="st0" width="3.3" height="1.6"/>
                                    <rect id="XMLID_96_" x="5.3" y="9" class="st0" width="3.3" height="1.6"/>
                                    <circle id="XMLID_95_" class="st0" cx="16.8" cy="17.6" r="1.2"/>
                                    <circle id="XMLID_94_" class="st0" cx="11.8" cy="17.6" r="1.2"/>
                                    <circle id="XMLID_93_" class="st0" cx="6.9" cy="17.6" r="1.2"/>
                                </g>
                            </g>
                            </svg>
                        </span>
                        <span class="notification-balloon" v-if="sidebarStats">{{ sidebarStats.total }}</span>
                    </router-link>
                </li>
                <li>
                    <router-link :to="{name: 'projects'}" v-bind:title="message.projects">
                        <span class="default">{{ message.projects }}</span>
                        <span class="tablet">
                            <svg version="1.1" class="projects-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                               viewBox="0 0 20.9 20.4" xml:space="preserve">
                            <g id="XMLID_823_">
                                <path id="XMLID_825_" class="st0" d="M16.9,11.4h2.5V9h-2.5c-0.2-0.7-0.4-1.7-0.8-2.3l1.8-1.8l-2.2-2.2l-1.8,1.8
                                  c-0.6-0.4-1.6-0.6-2.3-0.8V1.2H9.3v2.5C8.6,3.9,7.6,4.2,7,4.5L5.2,2.7L3,4.9l1.8,1.8C4.4,7.3,4.1,8.3,4,9H1.4v2.3H4
                                  c0.2,0.7,0.4,1.7,0.8,2.3L3,15.5l2.2,2.2L7,15.9c0.6,0.4,1.6,0.6,2.3,0.8v2.5h2.3v-2.5c0.7-0.2,1.7-0.4,2.3-0.8l1.8,1.8l2.2-2.2
                                  l-1.8-1.8C16.5,13.1,16.7,12,16.9,11.4z"/>
                                <circle id="XMLID_824_" class="st0" cx="10.4" cy="10.2" r="3.5"/>
                            </g>
                              </svg>
                        </span>
                        <span class="notification-balloon" v-if="sidebarStats">{{ sidebarStats.projectTotal }}</span>
                    </router-link>
                </li>
                <li>
                    <router-link :to="{name: 'tasks'}" v-bind:title="message.tasks">
                        <span class="default">{{ message.tasks }}</span>
                        <span class="tablet">
                            <svg version="1.1" class="tasks-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                               viewBox="0 0 20.2 19.8" xml:space="preserve">
                            <g id="XMLID_816_">
                                <g id="XMLID_820_">
                                    <circle id="XMLID_822_" class="st0" cx="7.5" cy="12.6" r="2.4"/>
                                    <path id="XMLID_821_" class="st0" d="M12.5,11.5l1.2-0.7l-1.6-2.7l-1.2,0.7c-0.5-0.5-1.2-0.8-1.9-1.1V6.3H5.9v1.4
                                      C5.2,7.9,4.6,8.3,4.1,8.8L2.8,8.1l-1.6,2.7l1.2,0.7c-0.1,0.7-0.2,1.4,0,2.1l-1.2,0.7l1.6,2.7l1.2-0.7c0.5,0.5,1.2,0.8,1.9,1.1v1.4
                                      h3.2v-1.4c0.7-0.2,1.3-0.6,1.9-1.1l1.2,0.7l1.6-2.7l-1.2-0.7C12.7,13,12.7,12.2,12.5,11.5z"/>
                                </g>
                                <g id="XMLID_817_">
                                    <circle id="XMLID_819_" class="st0" cx="15.8" cy="4.3" r="1.2"/>
                                    <path id="XMLID_818_" class="st0" d="M18.5,3.7l0.8-0.5l-0.8-1.4l-0.8,0.5C17.4,2,17,1.8,16.6,1.7V0.8H15v0.9
                                      c-0.4,0.1-0.8,0.3-1.1,0.6l-0.8-0.5l-0.8,1.4l0.8,0.5c-0.1,0.4-0.1,0.9,0,1.3l-0.8,0.5l0.8,1.4l0.8-0.5c0.3,0.3,0.7,0.5,1.1,0.6
                                      v0.9h1.6V6.9c0.4-0.1,0.8-0.3,1.1-0.6l0.8,0.5l0.8-1.4l-0.8-0.5C18.6,4.5,18.6,4.1,18.5,3.7z"/>
                                </g>
                            </g>
                            </svg>
                        </span>
                        <span class="notification-balloon" v-if="sidebarStats">{{ sidebarStats.taskTotal }}</span>
                    </router-link>
                </li>
            </ul>
            <ul v-show="this.$route.name.indexOf('project-') != -1">
                <li class="separator"></li>
                <li>
                    <router-link :to="{name: 'project-dashboard'}" v-bind:title="message.project_dashboard">
                        <span class="default">{{ message.project_dashboard }}</span>
                        <span class="tablet"></span>
                    </router-link>
                </li>
                <li>
                    <router-link :to="{name: 'project-organization'}" v-bind:title="message.organization">
                        <span class="default">{{ message.organization }}</span>
                        <span class="tablet"></span>
                    </router-link>
                </li>
                <li>
                    <router-link :to="{name: 'project-contract'}" v-bind:title="message.contract">
                        <span class="default">{{ message.contract }}</span>
                        <span class="tablet"></span>
                    </router-link>
                </li>
                <li>
                    <router-link :to="{name: 'project-phases-and-milestones'}" v-bind:title="message.phases_milestones">
                        <span class="default">{{ message.phases_milestones }}</span>
                        <span class="tablet"></span>
                    </router-link>
                </li>
                <li>
                    <router-link :to="{name: 'project-task-management-list'}" v-bind:title="message.task_management">
                        <span class="default">{{ message.task_management }}</span>
                        <span class="tablet"></span>
                    </router-link>
                </li>
                <li>
                    <router-link :to="{name: 'project-costs'}" v-bind:title="message.costs">
                        <span class="default">{{ message.costs }}</span>
                        <span class="tablet"></span>
                    </router-link>
                </li>
                <li>
                    <router-link :to="{name: 'project-resources'}" v-bind:title="message.resources">
                        <span class="default">{{ message.resources }}</span>
                        <span class="tablet"></span>
                    </router-link>
                </li>
                <li>
                    <router-link :to="{name: 'project-risks-and-opportunities'}" v-bind:title="message.risks_oportunities">
                        <span class="default">{{ message.risks_oportunities }}</span>
                        <span class="tablet"></span>
                    </router-link>
                </li>
                <li>
                    <router-link :to="{name: 'project-gantt-chart'}" v-bind:title="message.gantt_chart">
                        <span class="default">{{ message.gantt_chart }}</span>
                        <span class="tablet"></span>
                    </router-link>
                </li>
                <li>
                    <router-link :to="{name: 'project-rasci-matrix'}" v-bind:title="message.rasci_matrix">
                        <span class="default">{{ message.rasci_matrix }}</span>
                        <span class="tablet"></span>
                    </router-link>
                </li>
                <li>
                    <router-link :to="{name: 'project-meetings'}" v-bind:title="message.meetings">
                        <span class="default">{{ message.meetings }}</span>
                        <span class="tablet"></span>
                    </router-link>
                </li>
                <li>
                    <router-link :to="{name: 'project-todos'}" v-bind:title="message.todos">
                        <span class="default">{{ message.todos }}</span>
                        <span class="tablet"></span>
                    </router-link>
                </li>
                <li>
                    <router-link :to="{name: 'project-infos'}" v-bind:title="message.infos">
                        <span class="default">{{ message.infos }}</span>
                        <span class="tablet"></span>
                    </router-link>
                </li>
                <li>
                    <router-link :to="{name: 'project-decisions'}" v-bind:title="message.decisions">
                        <span class="default">{{ message.decisions }}</span>
                        <span class="tablet"></span>
                    </router-link>
                </li>
                <li>
                    <router-link :to="{name: 'project-status-reports'}" v-bind:title="message.status_reports">
                        <span class="default">{{ message.status_reports }}</span>
                        <span class="tablet"></span>
                    </router-link>
                </li>
                <li>
                    <router-link :to="{name: 'project-close-down-report'}" v-bind:title="message.close_down_report">
                        <span class="default">{{ message.close_down_report }}</span>
                        <span class="tablet"></span>
                    </router-link>
                </li>
            </ul>
        </nav>
    </aside>
</template>

<script>
import Vue from 'vue';
import {mapActions, mapGetters} from 'vuex';

export default {
    name: 'sidebar',
    created() {
        this.getSidebarInformation();
    },
    methods: {
        ...mapActions(['getSidebarInformation']),
        translate(key) {
            return Vue.translate(key);
        },
    },
    data: function() {
        return {
            message: {
                dashboard: this.translate('message.dashboard'),
                projects: this.translate('message.projects'),
                tasks: this.translate('message.tasks'),
                project_dashboard: this.translate('message.project_dashboard'),
                contract: this.translate('message.contract'),
                organization: this.translate('message.organization'),
                plan: this.translate('message.plan'),
                task_management: this.translate('message.task_management'),
                phases_milestones: this.translate('message.phases_milestones'),
                costs: this.translate('message.costs'),
                resources: this.translate('message.resources'),
                risks_oportunities: this.translate('message.risks_oportunities'),
                comunication: this.translate('message.communication'),
                control_measures: this.translate('message.control_measures'),
                status_reports: this.translate('message.status_reports'),
                meetings: this.translate('message.meetings'),
                todos: this.translate('message.todos'),
                infos: this.translate('message.infos'),
                decisions: this.translate('message.decisions'),
                close_down_project: this.translate('message.close_down_project'),
                gantt_chart: this.translate('message.gantt_chart'),
                rasci_matrix: this.translate('message.rasci_matrix'),
                close_down_report: this.translate('message.close_down_report'),
            },
        };
    },
    computed: {
        ...mapGetters({
            sidebarStats: 'sidebarStats',
        }),
    },
};
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped lang="scss">
  @import '../../css/_variables';

  .separator {
      height: 1px;
      background: $mainColor;
      margin: 14px 5px;
      padding: 0;
  }

  .st0 {
    fill:none;
    stroke:#666FA1;
    stroke-linecap:round;
    stroke-linejoin:round;
    stroke-miterlimit:10;
  }

  .dashboard-icon {
    enable-background:new 0 0 23.6 23.6;
  }

  .projects-icon {
    enable-background:new 0 0 20.9 20.4;
  }

  .tasks-icon {
    enable-background:new 0 0 20.2 19.8;
  }

  aside {
    width: 210px;
    padding: 10px;
    position: fixed;
    left: 0;
    top: 0;
    bottom: 0;
    background: $darkColor;

    @media screen and (max-width: 768px) {
      width: 59px;

      .default {
        display: none;
      }

      .tablet {
        display: block;
      }
    }

    .logo {
      margin: 14px 26px;
      display: block;
      width: 142px;
      height: 36px;
      background: url('../../assets/logo.png');

      @media screen and (max-width: 768px) {
        width: 39px;
        margin: 14px 0;
        background: url('../../assets/logo-small.png');
      }
    }

    nav {
      margin-top: 46px;
      color: $lightColor;
      font-size: 11px;
      text-transform: uppercase;

      li {
        padding: 2px 0;
        position: relative;

        .notification-balloon {
          right: 5px;
          top: 8px;

          @media screen and (max-width: 768px) {
            top: -1px;
            right: -9px;
          }
        }

        a {
          display: block;
          padding: 8px 10px;
          border-radius: 15px;
          letter-spacing: 0.1em;

          &.router-link-active, &:hover {
            color: $lighterColor;
            background: $mainColor;

            .st0{
              stroke: $lighterColor;
            }
          }
        }
      }
    }
  }
</style>
