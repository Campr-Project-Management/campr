#[program:Chat]
#command=/usr/bin/php /var/www/workspace.prod/current/bin/console gos:websocket:server --env=prod
#process_name=%(program_name)s_%(process_num)02d
#numprocs=1
#directory=/var/www/workspace.prod/current
#autostart=true
#autorestart=true
#user=root
#stdout_logfile=/var/www/workspace.prod/current/var/logs/chat_primary.log
#stdout_logfile_maxbytes=10MB
#stderr_logfile=/var/www/workspace.prod/current/var/logs/chat_primary.log
#stderr_logfile_maxbytes=10MB

[program:RedisQueueManager]
command=/usr/bin/php /var/www/workspace.prod/current/bin/console app:redis:queue:manager default --env=prod
process_name=%(program_name)s_%(process_num)02d
numprocs=1
directory=/var/www/workspace.prod/current
autostart=true
autorestart=true
user=root
stdout_logfile=/var/www/workspace.prod/current/var/logs/redis_queue_manager_default.log
stdout_logfile_maxbytes=10MB
stderr_logfile=/var/www/workspace.prod/current/var/logs/redis_queue_manager_default.log
stderr_logfile_maxbytes=10MB

[program:ImportProject]
command=/usr/bin/php /var/www/workspace.prod/current/bin/console app:redis:queue:manager import --env=prod
process_name=%(program_name)s_%(process_num)02d
numprocs=1
directory=/var/www/workspace.prod/current
autostart=true
autorestart=true
user=root
stdout_logfile=/var/www/workspace.prod/current/var/logs/redis_queue_manager_import.log
stdout_logfile_maxbytes=10MB
stderr_logfile=/var/www/workspace.prod/current/var/logs/redis_queue_manager_import.log
stderr_logfile_maxbytes=10MB

[program:AutomailerSend]
command=/usr/bin/php /var/www/workspace.prod/current/bin/console app:redis:queue:manager automailer --env=prod
process_name=%(program_name)s_%(process_num)02d
numprocs=1
directory=/var/www/workspace.prod/current
autostart=true
autorestart=true
user=root
stdout_logfile=/var/www/workspace.prod/current/var/logs/redis_queue_manager_automailer.log
stdout_logfile_maxbytes=10MB
stderr_logfile=/var/www/workspace.prod/current/var/logs/redis_queue_manager_automailer.log
stderr_logfile_maxbytes=10MB

[program:TutorialsRemoval]
command=/usr/bin/php /var/www/workspace.prod/current/bin/console app:redis:queue:manager tutorials_removal --max-requeue-count=1 --env=prod
process_name=%(program_name)s_%(process_num)02d
numprocs=1
directory=/var/www/workspace.prod/current
autostart=true
autorestart=true
user=root
stdout_logfile=/var/www/workspace.prod/current/var/logs/redis_queue_manager_tutorials_removal.log
stdout_logfile_maxbytes=10MB
stderr_logfile=/var/www/workspace.prod/current/var/logs/redis_queue_manager_tutorials_removal.log
stderr_logfile_maxbytes=10MB

[program:SSR]
command=nuxt
environment=HOST="127.0.0.1",PORT="3000"
process_name=%(program_name)s_%(process_num)02d
numprocs=1
directory=/var/www/workspace.prod/current/ssr
autostart=true
autorestart=true
user=root
stdout_logfile=/var/www/workspace.prod/current/var/logs/ssr.log
stdout_logfile_maxbytes=10MB
stderr_logfile=/var/www/workspace.prod/current/var/logs/ssr.log
stderr_logfile_maxbytes=10MB

[program:chrome]
command=google-chrome-stable --no-sandbox --headless --disable-gpu --disable-translate --disable-extensions --safebrowsing-disable-auto-update --disable-sync --metrics-recording-only --disable-default-apps --no-first-run --mute-audio --hide-scrollbars --remote-debugging-port=9222
process_name=%(program_name)s_%(process_num)02d
numprocs=1
directory=/var/www
autostart=true
autorestart=true
user=root
stderr_logfile=/var/www/workspace.prod/current/var/logs/chrome.err.log
stdout_logfile_maxbytes=10MB
stdout_logfile=/var/www/workspace.prod/current/var/logs/chrome.out.log
stderr_logfile_maxbytes=10MB

# on qa this breaks the functionality of the portal
[program:enqueue-workspaces]
command=/usr/bin/php /var/www/workspace.prod/current/bin/console enqueue:consume -vvv --setup-broker --time-limit="now + 5 minutes"
process_name=%(program_name)s_%(process_num)02d
numprocs=1
directory=/var/www/workspace.prod/current
autostart=false
autorestart=false
user=root
stdout_logfile=/var/www/workspace.prod/current/var/logs/enqueue_supervisor.log
stdout_logfile_maxbytes=10MB
stderr_logfile=/var/www/workspace.prod/current/var/logs/enqueue_supervisor.log
stderr_logfile_maxbytes=10MB
